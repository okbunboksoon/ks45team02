<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{user/layout/userDefault}">

<head>
    <style type="text/css">
        .styleTitle {
            text-align: center;
            color: black;
            font-weight: bold;
        }
        *{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: 'Alata', sans-serif;
        }

        .container-add{
            width: 70%;
            border-radius: 0px 10px 10px 0px;
            padding:40px;
            background: rgb(255,255,255);
            background: linear-gradient(287deg, rgba(255,255,255,1) 0%, rgba(243,244,244,1) 0%, rgba(255,255,255,1) 100%);
        }
    </style>
</head>
<th:block layout:fragment="customJs">
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</th:block>
<th:block layout:fragment="customScript">
    <script>
        $(function (){ //window.onload(ìš”ì†Œê°€ ë‹¤ ë Œë”ë§ì´ ë˜ê³  ë‚˜ì„œ ì‹¤í–‰)
            $('#submitBtn').click(function (){
                let isSubmint =true;
                $('#addUser input').each(function (idx,item){
                    let checkValue = $(item).val();
                    let labelValue = $(item).parents('div').find('label').text();
                    if(typeof checkValue =='undefined'||checkValue==null||checkValue==''){
                        alert(`${labelValue}ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ì—¬`);
                        $(item).focus();
                        isSubmint=false;
                        return false;
                    }
                });
                if(isSubmint) $('#addUser').submit();
                alert('íšŒì› ê°€ì… ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!');
            });
        });

        $(function(){
            const $idData = document.getElementById('userId');
            const $submitBtn = document.getElementById('submitBtn');

            $('#userPw').attr("disabled", true);
            $('#userBirth').attr("disabled", true);
            $('#userPwCheck').attr("disabled", true);
            $('#userAddr').attr("disabled", true);
            $('#userEmail').attr("disabled", true);
            $('#userName').attr("disabled", true);
            $('#userNickName').attr("disabled", true);
            $('#userPhone').attr("disabled", true);

            function validateValue(checkValue){
                if(typeof checkValue == 'undefined' || checkValue == null || checkValue == ''){
                    return true;
                }
                return false;
            }
            $('#checkBtn').click(function(){
                const $id = $('#userId').val();
                if(validateValue($id))
                {
                    alert('íšŒì› ì•„ì´ë”” ì…ë ¥í•´ì£¼ì„¸ìš”');
                    $('#userId').focus();
                    return false;
                }

                $('#userId').keypress(function(){
                    $submitBtn.disabled = true;
                    $('#addUser input').not('#userId').prop('disabled', true);
                    $('#addUser button').not('#checkBtn').prop('disabled', true);

                })
                let idCheckApi = '/admin/idCheck/'+ $id;
                fetch(idCheckApi)
                        .then(response => response.json())
                        .then(data => {

                            if(data !== 0){
                                alert(`${$id} ì•„ì´ë”” ê°€ ìˆìŠµë‹ˆë‹¤`);
                                $('#userId').val('');
                                $submitBtn.disabled = true;
                                $('#addUser input').not('#userId').prop('disabled', true);
                                $('#addUser button').not('#checkBtn').prop('disabled', true);
                                $idData.focus();
                                return false;
                            }else {
                                alert("ì¤‘ë³µì´ ì•„ë‹ˆë‹¤ ì´ê±°ì•¼~");
                                $submitBtn.disabled = false;
                                $('#addUser input').not('#userId').prop('disabled', false);
                                $('#addUser button').not('#checkBtn').prop('disabled', false);

                            }

                        })
                        .catch(err =>console.log(err));
            });
        });

    </script>
</th:block>
<th:block layout:fragment="customContents">
    <div class="">
        <div class="page-title"></div>
        <div class="clearfix"></div>
        <div class="row">
            <div class="col-md-12 col-sm-12">
                <div class="x_panel">
                    <div class="x_content">
                        <br><br>
                        <h3 class="styleTitle">íšŒì›ê°€ì…</h3>
                        <center>
                        <form id="addUser" th:action="@{/addUser}" method="post">
                                <div class="container-add">
                                <div class="item form-group">
                                    <label for="userId" class="col-form-label col-md-3 col-sm-3 label-align">íšŒì›ì•„ì´ë””</label>
                                    <div class="col-md-4 ">
                                        <input type="text" id="userId" name="userId"
                                               placeholder="íšŒì›ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." class="form-control"/>
                                    </div>
                                        <button type="button" id="checkBtn" style="background-color: black;color: white;">ğŸ‘Œ-ì•„ì´ë”” ì¤‘ë³µì²´í¬-ğŸ‘Œ</button>
                                </div>
                                <div class="item form-group">
                                    <label for="userPw" class="col-form-label col-md-3 col-sm-3 label-align">íšŒì›ë¹„ë°€ë²ˆí˜¸</label>
                                    <div class="col-md-4 ">
                                        <input type="text" id="userPw" name="userPw"
                                               placeholder="íšŒì›ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." class="form-control"/>
                                    </div>
                                </div>
                                <div class="item form-group">
                                    <label for="userPwCheck" class="col-form-label col-md-3 col-sm-3 label-align">íšŒì›ë¹„ë°€ë²ˆí˜¸í™•ì¸</label>
                                    <div class="col-md-4 ">
                                        <input type="text" id="userPwCheck" name="userPwCheck"
                                               placeholder="íšŒì›ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”." class="form-control"/>
                                    </div>
                                </div>
                                <div class="item form-group">
                                    <label for="userName" class="col-form-label col-md-3 col-sm-3 label-align">íšŒì›ì´ë¦„</label>
                                    <div class="col-md-4 ">
                                        <input type="text" id="userName" name="userName"
                                               placeholder="íšŒì›ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." class="form-control"/>
                                    </div>
                                </div>
                                <div class="item form-group">
                                    <label for="userNickName" class="col-form-label col-md-3 col-sm-3 label-align">ë‹‰ë„¤ì„</label>
                                    <div class="col-md-4 ">
                                        <input type="text" id="userNickName" name="userNickName"
                                               placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." class="form-control"/>
                                    </div>
                                </div>
                                <div class="item form-group">
                                    <label for="userAddr" class="col-form-label col-md-3 col-sm-3 label-align">íšŒì›ì£¼ì†Œ</label>
                                    <div class="col-md-4 ">
                                        <input type="text" id="userAddr" name="userAddr"
                                               placeholder="íšŒì› ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." class="form-control"/>
                                    </div>
                                </div>
                                <div class="item form-group">
                                    <label for="userPhone" class="col-form-label col-md-3 col-sm-3 label-align">íšŒì›ì „í™”ë²ˆí˜¸</label>
                                    <div class="col-md-4 ">
                                        <input type="text" id="userPhone" name="userPhone"
                                               placeholder="íšŒì›ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." class="form-control"/>
                                    </div>
                                </div>
                                <div class="item form-group">
                                    <label for="userEmail" class="col-form-label col-md-3 col-sm-3 label-align">íšŒì›ì´ë©”ì¼</label>
                                    <div class="col-md-4">
                                        <input type="text" id="userEmail" name="userEmail"
                                               placeholder="íšŒì›ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.ex)@naver.com" class="form-control"/>
                                    </div>
                                </div>


                                <div class="item form-group">
                                    <label for="userBirth" class="col-form-label col-md-3 col-sm-3 label-align">íšŒì›ìƒë…„ ì›”ì¼</label>
                                    <div class="col-md-4">
                                        <input type=date id="userBirth" name="userBirth"
                                               placeholder="íšŒì› ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." class="form-control"/>
                                    </div>
                                </div>
                                <div class="item form-group">
                                    <div  class="col-md-4  " style="text-align: center;">
                                        <button class="btn btn-primary" type="button" id="submitBtn" style="background-color: black">ë“±ë¡</button>
                                        <button class="btn btn-danger" type="button" id="resetBtn" style="background-color: black">ì·¨ì†Œ</button>
                                    </div>
                                </div>
                                </div>
                        </form>
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>
</th:block>

<!-- ì‚¬ìš©ì ì§€ì • js íŒŒì¼ -->
<th:block layout:fragment="customjs">

    <!-- jQuery -->
    <script th:src="@{/admin/vendors/jquery/dist/jquery.min.js}"></script>
    <!-- Bootstrap -->
    <script th:src="@{/admin/vendors/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
    <!-- FastClick -->
    <script th:src="@{/admin/vendors/fastclick/lib/fastclick.js}"></script>
    <!-- NProgress -->
    <script th:src="@{/admin/vendors/nprogress/nprogress.js}"></script>

    <script th:src="@{/admin/build/js/custom.min.js}"></script>

    <script th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js}"></script>
    <script th:src="@{admin/vendors/validator/multifield.js}"></script>
    <script th:src="@{admin/vendors/validator/validator.js}"></script>
</th:block>
</html>